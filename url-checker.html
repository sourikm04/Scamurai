<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Scamurai - Advanced URL Security Analyzer</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="url.css">
</head>
<body>
  
  <div class="grid-bg"></div>
  <div class="hexagons" id="hexagons"></div>
  <div class="particles" id="particles"></div>
  <div class="binary-code" id="binaryCode"></div>
  <div class="floating-circles" id="floatingCircles"></div>

  <nav class="nav-bar">
    <a href="index.html">
      <img class="logo-light" src="images/LOGO.png" alt="Scamurai Logo">
      <img class="logo-dark" src="images/LOGO_D.png" alt="Scamurai Logo">
    </a>
    <div class="nav-links" id="navLinks">
      <a href="index.html"><i class="fas fa-home"></i> Home</a>
      <a href="about-us.html"><i class="fas fa-info-circle"></i> About</a>
      <a id="themeToggle"><i class="fas fa-adjust"></i> Theme</a>
    </div>
    <i class="menu-btn fas fa-bars" id="menuBtn"></i>
  </nav>

  <main>
    <div class="container">
      <div class="checker-card">
        <h2><i class="fas fa-shield-alt"></i> Advanced URL Security Analyzer</h2>
        <p>Our cutting-edge security system performs comprehensive analysis including phishing detection, malware signatures, brand impersonation, SSL validation, domain reputation, and real-time threat intelligence to protect you from online threats.</p>
        
        <form class="url-form" id="urlForm">
          <div class="input-group">
            <input type="url" class="url-input" placeholder="https://example.com" required id="urlInput">
            <button type="submit" class="submit-btn">
              <i class="fas fa-search"></i> Analyze Security
            </button>
          </div>
          <div class="quick-actions">
            <button type="button" class="quick-btn" data-url="https://google.com">
              <i class="fab fa-google"></i> Test Google
            </button>
            <button type="button" class="quick-btn" data-url="https://facebook.com">
              <i class="fab fa-facebook"></i> Test Facebook
            </button>
            <button type="button" class="quick-btn" data-url="https://amazon.com">
              <i class="fab fa-amazon"></i> Test Amazon
            </button>
          </div>
        </form>
      </div>

      <div class="loading" id="loading">
        <div class="spinner"></div>
        <p>Performing comprehensive security analysis...</p>
        <div class="analysis-steps">
          <div class="step active">
            <i class="fas fa-search"></i>
            <span>Analyzing URL structure</span>
          </div>
          <div class="step">
            <i class="fas fa-shield-alt"></i>
            <span>Checking threat intelligence</span>
          </div>
          <div class="step">
            <i class="fas fa-certificate"></i>
            <span>Validating SSL certificate</span>
          </div>
          <div class="step">
            <i class="fas fa-chart-line"></i>
            <span>Calculating security score</span>
          </div>
        </div>
      </div>

      <div class="result-card" id="resultCard">
        <div class="result-header">
          <h3 class="result-title" id="resultTitle">
            <i class="fas fa-shield-alt"></i> Security Analysis Complete
          </h3>
        </div>
        
        <p class="result-text" id="resultText"></p>
        
        <div class="risk-factors" id="riskFactors">
          <h4><i class="fas fa-exclamation-triangle"></i> Security Risks Detected</h4>
          <div class="risk-list" id="riskList"></div>
        </div>
        
        <div class="technical-details" id="technicalDetails">
          <h4><i class="fas fa-cogs"></i> Technical Analysis</h4>
          <div class="tech-grid" id="techGrid"></div>
        </div>

        <div class="recommendations" id="recommendations">
          <h4><i class="fas fa-lightbulb"></i> Security Recommendations</h4>
          <div class="recommendations-list" id="recommendationsList"></div>
        </div>

        <div class="analysis-meta">
          <div class="meta-item">
            <i class="fas fa-clock"></i>
            <span>Analysis completed in <span id="analysisTime">0</span>ms</span>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer>
    <div class="copyright">
      © 2025 SCAMURAI. All rights reserved. | Advanced Cybersecurity Solutions for the Modern World
    </div>
  </footer>

  <script src="url-detector.js"></script>
  <script>
    // Theme Switch
    document.addEventListener("DOMContentLoaded", async () => {
      const themeToggle = document.getElementById('themeToggle');
      const body = document.body;
      
      // Load saved theme from localStorage or set default to 'light'
      const savedTheme = localStorage.getItem('theme') || 'light';
      body.setAttribute('data-theme', savedTheme);
      
      themeToggle.addEventListener('click', () => {
        const isDark = body.getAttribute('data-theme') === 'dark';
        const newTheme = isDark ? 'light' : 'dark';
        
        body.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
      });
      
      // Mobile Menu toggle
      const menuBtn = document.getElementById('menuBtn');
      const navLinks = document.getElementById('navLinks');
      
      menuBtn.addEventListener('click', () => {
        navLinks.classList.toggle('active');
      });
      
      document.addEventListener('click', (e) => {
        if (!menuBtn.contains(e.target) && !navLinks.contains(e.target)) {
          navLinks.classList.remove('active');
        }
      });
      
      // Initialize URL detector
      try {
        console.log('🔧 Initializing URL Detector...');
        await urlDetector.init();
        console.log('✅ URL Detector initialized successfully');
        
        // Test the detector with a simple URL
        try {
          const testResult = await urlDetector.analyzeUrl('https://google.com');
          console.log('🧪 Test analysis result:', testResult);
        } catch (testError) {
          console.warn('⚠️ Test analysis failed:', testError);
        }
      } catch (error) {
        console.error('❌ Error initializing URL Detector:', error);
        // Continue anyway, the detector will use fallback data
      }
      
      // URL Checker Functionality
      const form = document.getElementById('urlForm');
      const resultCard = document.getElementById('resultCard');
      const loading = document.getElementById('loading');
      const urlInput = document.getElementById('urlInput');
      const resultTitle = document.getElementById('resultTitle');
      const resultText = document.getElementById('resultText');
      const riskList = document.getElementById('riskList');
      const techGrid = document.getElementById('techGrid');
      const recommendationsList = document.getElementById('recommendationsList');
      const analysisTime = document.getElementById('analysisTime');

      // Quick action buttons
      const quickBtns = document.querySelectorAll('.quick-btn');
      quickBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          urlInput.value = btn.dataset.url;
          form.dispatchEvent(new Event('submit'));
        });
      });

      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        loading.style.display = 'block';
        resultCard.style.display = 'none';

        // Animate analysis steps
        const steps = document.querySelectorAll('.analysis-steps .step');
        steps.forEach((step, index) => {
          setTimeout(() => {
            steps.forEach(s => s.classList.remove('active'));
            step.classList.add('active');
          }, index * 800);
        });

        try {
          const url = urlInput.value.trim();
          console.log('🔍 Analyzing URL:', url);
          
          if (!urlDetector || typeof urlDetector.analyzeUrl !== 'function') {
            throw new Error('URL Detector not properly loaded');
          }
          
          const result = await urlDetector.analyzeUrl(url);
          console.log('📊 Analysis result:', result);
          showResult(result);
        } catch (error) {
          console.error('❌ Error analyzing URL:', error);
          showError(error.message || 'Analysis failed');
        } finally {
          loading.style.display = 'none';
          resultCard.style.display = 'block';
        }
      });

      // Create background animations on page load
      createBackgroundAnimations();
      
      function showResult(result) {
        // Reset result card classes
        resultCard.className = 'result-card';
        
        // Set status-based styling
        if (result.score >= 80) {
          resultCard.classList.add('safe');
        } else if (result.score >= 50) {
          resultCard.classList.add('warning');
        } else {
          resultCard.classList.add('unsafe');
        }
        

        
        // Update result title and text
        if (result.isSafe) {
          resultTitle.innerHTML = '<i class="fas fa-check-circle"></i> URL is Secure';
          resultText.textContent = `The URL ${result.url} has passed our comprehensive security analysis with a score of ${result.score}/100.`;
        } else {
          resultTitle.innerHTML = '<i class="fas fa-exclamation-triangle"></i> Security Risks Detected';
          resultText.textContent = `We've detected potential security risks with ${result.url}. Security score: ${result.score}/100`;
        }
        
        // Update risk factors
        updateRiskFactors(result);
        
        // Update technical details
        updateTechnicalDetails(result);
        
        // Update recommendations
        updateRecommendations(result);
        
        // Update meta information
        analysisTime.textContent = result.analysisTime;
      }
      

      

      
      function updateRiskFactors(result) {
        riskList.innerHTML = '';
        
        if (result.risks.length === 0) {
          riskList.innerHTML = '<p class="no-risks">✅ No security risks detected. This URL appears safe for browsing.</p>';
          return;
        }
        
        result.risks.forEach(risk => {
          const riskElement = document.createElement('div');
          riskElement.className = 'risk-item';
          
          // Determine icon and color based on severity
          let iconClass, iconColor;
          if (risk.severity === 'high') {
            iconClass = 'fa-exclamation-triangle';
            iconColor = '#ef4444';
          } else if (risk.severity === 'medium') {
            iconClass = 'fa-exclamation-circle';
            iconColor = '#f59e0b';
          } else {
            iconClass = 'fa-info-circle';
            iconColor = '#3b82f6';
          }
          
          riskElement.innerHTML = `
            <div class="risk-icon" style="color: ${iconColor}">
              <i class="fas ${iconClass}"></i>
            </div>
            <div class="risk-content">
              <h5>${risk.type.replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase())}</h5>
              <p>${risk.message}</p>
              <span class="risk-severity ${risk.severity}">${risk.severity.toUpperCase()}</span>
            </div>
          `;
          riskList.appendChild(riskElement);
        });
      }
      
      function updateTechnicalDetails(result) {
        let trustLevelClass = '';
        let trustLevelText = '';
        if (result.domainTrust === 'trusted') {
          trustLevelClass = 'trusted';
          trustLevelText = '✅ Trusted';
        } else if (result.domainTrust === 'malicious') {
          trustLevelClass = 'malicious';
          trustLevelText = '⛔ Malicious';
        } else {
          trustLevelClass = 'unverified';
          trustLevelText = '⚠️ Unverified';
        }
        
        techGrid.innerHTML = `
          <div class="tech-item">
            <span class="tech-label">Domain Trust Level</span>
            <span class="tech-value ${trustLevelClass}">${trustLevelText}</span>
          </div>
          <div class="tech-item">
            <span class="tech-label">SSL Certificate</span>
            <span class="tech-value ${result.hasSSL ? 'safe' : 'unsafe'}">
              ${result.hasSSL ? '✅ Valid' : '⛔ Invalid'}
            </span>
          </div>
          <div class="tech-item">
            <span class="tech-label">URL Shortener</span>
            <span class="tech-value ${result.isUrlShortener ? 'warning' : 'safe'}">
              ${result.isUrlShortener ? '⚠️ Yes' : '✅ No'}
            </span>
          </div>
          <div class="tech-item">
            <span class="tech-label">Domain Reputation</span>
            <span class="tech-value ${result.reputation > 70 ? 'safe' : result.reputation > 40 ? 'warning' : 'unsafe'}">
              ${result.reputation}/100
            </span>
          </div>
        `;
      }
      
      function updateRecommendations(result) {
        recommendationsList.innerHTML = '';
        
        const recommendations = [];
        
        if (result.score < 50) {
          recommendations.push({
            icon: 'fa-ban',
            text: 'Avoid visiting this URL - high security risk detected',
            type: 'critical'
          });
        }
        
        if (!result.hasSSL) {
          recommendations.push({
            icon: 'fa-lock',
            text: 'Use HTTPS version of this site for secure data transmission',
            type: 'important'
          });
        }
        
        if (result.isUrlShortener) {
          recommendations.push({
            icon: 'fa-external-link-alt',
            text: 'Be cautious - URL shorteners can hide malicious destinations',
            type: 'warning'
          });
        }
        
        if (result.domainAge === 'new') {
          recommendations.push({
            icon: 'fa-calendar-plus',
            text: 'Domain is relatively new - exercise extra caution',
            type: 'info'
          });
        }
        
        if (result.reputation < 50) {
          recommendations.push({
            icon: 'fa-star',
            text: 'Domain has low reputation - verify before proceeding',
            type: 'warning'
          });
        }
        
        if (recommendations.length === 0) {
          recommendations.push({
            icon: 'fa-thumbs-up',
            text: 'No specific recommendations - URL appears safe',
            type: 'success'
          });
        }
        
        recommendations.forEach(rec => {
          const recElement = document.createElement('div');
          recElement.className = `recommendation-item ${rec.type}`;
          recElement.innerHTML = `
            <i class="fas ${rec.icon}"></i>
            <span>${rec.text}</span>
          `;
          recommendationsList.appendChild(recElement);
        });
      }
      
      function showError(message) {
        // Reset result card classes
        resultCard.className = 'result-card unsafe';
        
        // Update result title
        resultTitle.innerHTML = '<i class="fas fa-exclamation-circle"></i> Analysis Error';
        resultText.textContent = message || 'We encountered an error while analyzing the URL. Please try again.';
        
        // Clear other sections
        riskList.innerHTML = '';
        techGrid.innerHTML = '';
        recommendationsList.innerHTML = '';
      }
      
      // Create background animations
      function createBackgroundAnimations() {
          const isDark = body.getAttribute('data-theme') === 'dark';
          
          // Clear existing elements
          document.getElementById('hexagons').innerHTML = '';
          document.getElementById('particles').innerHTML = '';
          document.getElementById('binaryCode').innerHTML = '';
          document.getElementById('floatingCircles').innerHTML = '';
          
          // Create hexagons
          const hexagonsContainer = document.getElementById('hexagons');
          const hexagonCount = 15;
          
          for (let i = 0; i < hexagonCount; i++) {
              const hexagon = document.createElement('div');
              hexagon.classList.add('hexagon');
              
              // Random properties
              const size = Math.random() * 40 + 20;
              const posX = Math.random() * 100;
              const duration = Math.random() * 30 + 20;
              const delay = Math.random() * 10;
              
              hexagon.style.width = `${size}px`;
              hexagon.style.height = `${size * 0.577}px`;
              hexagon.style.left = `${posX}%`;
              hexagon.style.bottom = `-${size}px`;
              hexagon.style.animationDuration = `${duration}s`;
              hexagon.style.animationDelay = `${delay}s`;
              
              // Random color for hexagons
              const colors = ['#00BCD4', '#00E5FF', '#80DEEA', '#26C6DA'];
              const color = colors[Math.floor(Math.random() * colors.length)];
              hexagon.style.background = color;
              
              // ALWAYS append regardless of theme
              hexagonsContainer.appendChild(hexagon);
          }
          
          // Create particles
          const particlesContainer = document.getElementById('particles');
          const particleCount = 50;
          
          for (let i = 0; i < particleCount; i++) {
              const particle = document.createElement('div');
              particle.classList.add('particle');
              
              // Random properties
              const size = Math.random() * 8 + 2;
              const posX = Math.random() * 100;
              const duration = Math.random() * 20 + 10;
              const delay = Math.random() * 5;
              
              particle.style.width = `${size}px`;
              particle.style.height = `${size}px`;
              particle.style.left = `${posX}%`;
              particle.style.bottom = `-${size}px`;
              particle.style.animationDuration = `${duration}s`;
              particle.style.animationDelay = `${delay}s`;
              
              // Random color for particles
              const colors = ['#00BCD4', '#00E5FF', '#80DEEA', '#26C6DA'];
              const color = colors[Math.floor(Math.random() * colors.length)];
              particle.style.background = color;
              
              // ALWAYS append regardless of theme
              particlesContainer.appendChild(particle);
          }
          
          // Create binary code
          const binaryContainer = document.getElementById('binaryCode');
          const binaryCount = 30;
          const binaryChars = ['0', '1'];
          
          for (let i = 0; i < binaryCount; i++) {
              const binaryDigit = document.createElement('div');
              binaryDigit.classList.add('binary-digit');
              
              // Random properties
              const posX = Math.random() * 100;
              const duration = Math.random() * 30 + 20;
              const delay = Math.random() * 10;
              const charCount = Math.floor(Math.random() * 10) + 5;
              let content = '';
              
              for(let j = 0; j < charCount; j++) {
                  content += binaryChars[Math.floor(Math.random() * 2)];
              }
              
              binaryDigit.textContent = content;
              binaryDigit.style.left = `${posX}%`;
              binaryDigit.style.bottom = `-50px`;
              binaryDigit.style.animationDuration = `${duration}s`;
              binaryDigit.style.animationDelay = `${delay}s`;
              binaryDigit.style.fontSize = `${Math.random() * 10 + 14}px`;
              
              // ALWAYS append regardless of theme
              binaryContainer.appendChild(binaryDigit);
          }
          
          // Create floating circles
          const circlesContainer = document.getElementById('floatingCircles');
          const circleCount = 10;
          
          for (let i = 0; i < circleCount; i++) {
              const circle = document.createElement('div');
              circle.classList.add('floating-circle');
              
              // Random properties
              const size = Math.random() * 200 + 50;
              const posX = Math.random() * 100;
              const duration = Math.random() * 40 + 20;
              const delay = Math.random() * 10;
              
              circle.style.width = `${size}px`;
              circle.style.height = `${size}px`;
              circle.style.left = `${posX}%`;
              circle.style.bottom = `-${size}px`;
              circle.style.animationDuration = `${duration}s`;
              circle.style.animationDelay = `${delay}s`;
              circle.style.opacity = `${Math.random() * 0.1 + 0.05}`;
              
              // ALWAYS append regardless of theme
              circlesContainer.appendChild(circle);
          }
      }
    });
  </script>
</body>
</html>
